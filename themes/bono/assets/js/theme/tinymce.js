!function(t){"function"==typeof define&&define.amd?define("tinymce",t):t()}((function(){"use strict";function t(t){var e=t.settings.color_picker_callback;if(e)return function(){var n=this;e.call(t,(function(t){n.value(t).fire("change")}),n.value())}}tinymce.create("tinymce.plugins.blockquote_button_plugin",{init:function(e,n){var a=window.wps_admin_globals||{assets:"/wp-content/themes/bono/assets"};e.addButton("blockquote_btn",{title:"Add blockquote",onclick:function(){wp.mce.blockquote_btn.popupwindow(e)}}),e.addButton("mark_btn",{title:"Mark text",image:a.assets+"/images/admin/tinymce-mark.png",onclick:function(){wp.mce.mark_btn.popupwindow(e)}}),e.addButton("content_btn",{title:e.translate("Add Button"),image:a.assets+"/images/admin/tinymce-button.png",onclick:function(){e.windowManager.open({title:e.translate("Insert Button"),body:[{type:"textbox",name:"text",label:e.translate("Button Text")},{type:"textbox",name:"href",label:e.translate("Link")},{type:"listbox",name:"hide_link",label:e.translate("Hide Link"),values:[{text:e.translate("Hide"),value:"yes"},{text:e.translate("Do not hide"),value:"no"}]},{type:"colorbox",name:"background_color",label:e.translate("Background Color"),onaction:t(e)},{type:"colorbox",name:"color",label:e.translate("Text Color"),onaction:t(e)},{type:"listbox",name:"size",label:e.translate("Size"),values:[{text:e.translate("Small"),value:"small"},{text:e.translate("Medium"),value:"normal"},{text:e.translate("Big"),value:"big"}]},{type:"listbox",name:"target",label:e.translate("Open Link"),values:[{text:e.translate("Current tab"),value:"_self"},{text:e.translate("New tab"),value:"_blank"}]}],onsubmit:function(t){var n="";0===t.data.text.length&&(t.data.text="Button"),0!==t.data.background_color.length&&(n+=' background_color="'+t.data.background_color+'"'),0!==t.data.color.length&&(n+=' color="'+t.data.color+'"'),e.insertContent('[button href="'+t.data.href+'" hide_link="'+t.data.hide_link+'" '+n+' size="'+t.data.size+'" target="'+t.data.target+'"]'+t.data.text+"[/button]")}})}}),e.addButton("mask_link",{title:"Mask link",cmd:"mask_link_command",image:a.assets+"/images/admin/link.png"}),e.addCommand("mask_link_command",(function(t,n){var a=e.selection.getContent({format:"raw"});if(a){var l=prompt(e.translate("Enter link address"));null!==l&&((l=l.trim())?e.execCommand("mceInsertContent",0,'[mask_link href="'+l+'" target="_blank"]'+a+"[/mask_link]"):alert(e.translate("You must specify the link address")))}else alert(e.translate("Link text must be selected"))})),e.addCommand("spoiler_btn_command",(function(){var t=e.selection.getContent({format:"html"});if(0!==t.length){var n=prompt(e.translate("Enter a spoiler title or leave blank")),a=' title="'+n+'"';n.length||(a=""),e.execCommand("mceReplaceContent",!1,"[spoiler"+a+"]"+t+"[/spoiler]")}else alert(e.translate("Highlight the spoiler text"))}))},createControl:function(t,e){return null},getInfo:function(){return{longname:"Extra Buttons",author:"WPShop.biz",version:"1"}}}),tinymce.PluginManager.add("blockquote_button_plugin",tinymce.plugins.blockquote_button_plugin)}));